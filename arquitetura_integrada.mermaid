graph TB
    subgraph "ğŸŒ Frontend Layer - Dark Mode Professional"
        UI[ğŸ¨ shadcn/ui Components<br/>Dark Theme + Tailwind]
        APP[âš›ï¸ Next.js 14 App<br/>TypeScript + React]
        PWA[ğŸ“± PWA Features<br/>Offline + Installable]
        EDITOR[âœï¸ Rich Editor<br/>Blocks + Collaboration]
        
        UI --> APP
        APP --> PWA
        APP --> EDITOR
    end
    
    subgraph "ğŸ—ï¸ Application Layer - Enterprise Grade"
        AUTH[ğŸ” Enterprise Auth<br/>MFA + RBAC + Audit]
        API[ğŸ”Œ Multi-Protocol APIs<br/>REST + GraphQL + WebSocket]
        COLLAB[ğŸ’¬ Real-time Collab<br/>Comments + Mentions + Live Edit]
        WORKFLOWS[ğŸ¯ Clinical Workflows<br/>Projects + Tasks + Templates]
        
        AUTH --> API
        API --> COLLAB
        API --> WORKFLOWS
    end
    
    subgraph "ğŸ“Š Data Layer - LGPD Compliant"
        DB[(ğŸ—„ï¸ PostgreSQL<br/>8 Tables + Hierarchical)]
        STORAGE[ğŸ“ Secure Storage<br/>Files + Versions + Audit]
        REALTIME[âš¡ Supabase Realtime<br/>Live Updates + Sync]
        CACHE[ğŸ’¾ Multi-layer Cache<br/>Redis + Browser + Query]
        
        DB --> STORAGE
        DB --> REALTIME
        DB --> CACHE
    end
    
    subgraph "â˜ï¸ Infrastructure - Cloud Native"
        VERCEL[ğŸš€ Vercel Platform<br/>Edge + Functions + CDN]
        SUPABASE[ğŸ”¥ Supabase Cloud<br/>Managed Backend + Security]
        MONITORING[ğŸ“Š Monitoring<br/>Sentry + Analytics + Alerts]
        
        VERCEL --> SUPABASE
        VERCEL --> MONITORING
    end
    
    subgraph "ğŸ‘¥ User Experience - Clinic Focused"
        MOBILE[ğŸ“± Mobile PWA<br/>Touch + Offline + Sync]
        DESKTOP[ğŸ’» Desktop App<br/>Full Features + Shortcuts]
        NOTEBOOKS[ğŸ“š Hierarchical Notebooks<br/>Pages + Sub-pages + Templates]
        DASHBOARD[ğŸ“Š Executive Dashboard<br/>Metrics + Analytics + Reports]
        
        MOBILE --> NOTEBOOKS
        DESKTOP --> NOTEBOOKS
        NOTEBOOKS --> DASHBOARD
    end
    
    subgraph "ğŸ”’ Security & Compliance - Medical Grade"
        RLS[ğŸ›¡ï¸ Row Level Security<br/>Database Policies + Audit]
        LGPD[âš–ï¸ LGPD Compliance<br/>Consent + Rights + Pseudonymization]
        ENCRYPTION[ğŸ” End-to-End Security<br/>TLS + JWT + Data Encryption]
        AUDIT[ğŸ“‹ Complete Audit<br/>Actions + Access + Changes]
        
        RLS --> LGPD
        LGPD --> ENCRYPTION
        ENCRYPTION --> AUDIT
    end
    
    subgraph "ğŸ¯ Clinical Features - Physiotherapy Specific"
        MENTORSHIP[ğŸ‘¨â€ğŸ« Mentorship System<br/>Physiotherapist + Intern]
        PROTOCOLS[ğŸ“‹ Clinical Protocols<br/>Templates + Procedures + Guidelines]
        ANALYTICS[ğŸ“ˆ Productivity Analytics<br/>Team Performance + Insights]
        INTEGRATION[ğŸ”— Calendar Integration<br/>Scheduling + Appointments]
        
        MENTORSHIP --> PROTOCOLS
        PROTOCOLS --> ANALYTICS
        ANALYTICS --> INTEGRATION
    end
    
    %% Main Connections
    NOTEBOOKS --> UI
    DASHBOARD --> UI
    APP --> AUTH
    APP --> API
    
    API --> DB
    API --> STORAGE
    API --> REALTIME
    
    COLLAB --> REALTIME
    WORKFLOWS --> DB
    
    AUTH --> RLS
    DB --> LGPD
    API --> ENCRYPTION
    
    APP --> VERCEL
    DB --> SUPABASE
    STORAGE --> SUPABASE
    REALTIME --> SUPABASE
    
    MENTORSHIP --> WORKFLOWS
    PROTOCOLS --> NOTEBOOKS
    ANALYTICS --> DASHBOARD
    
    %% Data Flow - Enhanced
    UI -.->|User Actions| COLLAB
    COLLAB -.->|Real-time Updates| API
    API -.->|Secure Queries| DB
    DB -.->|Audited Data| API
    API -.->|Validated Response| COLLAB
    COLLAB -.->|Live State Update| UI
    
    REALTIME -.->|Live Collaboration| COLLAB
    PWA -.->|Offline Sync| CACHE
    CACHE -.->|Local Data| COLLAB
    AUDIT -.->|Compliance Logs| MONITORING
    
    %% Clinical Workflow
    MENTORSHIP -.->|Supervision| WORKFLOWS
    PROTOCOLS -.->|Templates| EDITOR
    ANALYTICS -.->|Insights| DASHBOARD
    INTEGRATION -.->|Scheduling| WORKFLOWS
    
    %% Styling - Enhanced
    classDef frontend fill:#1e293b,stroke:#3b82f6,stroke-width:2px,color:#e2e8f0
    classDef application fill:#065f46,stroke:#10b981,stroke-width:2px,color:#e2e8f0
    classDef data fill:#7c2d12,stroke:#dc2626,stroke-width:2px,color:#e2e8f0
    classDef infrastructure fill:#581c87,stroke:#a855f7,stroke-width:2px,color:#e2e8f0
    classDef security fill:#0f766e,stroke:#14b8a6,stroke-width:2px,color:#e2e8f0
    classDef clinical fill:#be185d,stroke:#ec4899,stroke-width:2px,color:#e2e8f0
    classDef experience fill:#1e40af,stroke:#3b82f6,stroke-width:2px,color:#e2e8f0
    
    class UI,APP,PWA,EDITOR frontend
    class AUTH,API,COLLAB,WORKFLOWS application
    class DB,STORAGE,REALTIME,CACHE data
    class VERCEL,SUPABASE,MONITORING infrastructure
    class RLS,LGPD,ENCRYPTION,AUDIT security
    class MENTORSHIP,PROTOCOLS,ANALYTICS,INTEGRATION clinical
    class MOBILE,DESKTOP,NOTEBOOKS,DASHBOARD experience

